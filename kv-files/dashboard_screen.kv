#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import Window kivy.core.window.Window

<DashboardScreen@Screen>:
    Video:
        id: dashboard_bg
        source: app.bg_paths[0]
        state: 'play'
        options: {'eos': 'loop'}
        fit_mode: 'cover'
        mipmap: True

    Profile:
        id: profile

    MDLabel:
        id: timer_label
        text: '25:00'
        halign: 'center'
        theme_text_color: "Custom"
        text_color: (1, 1, 1, 1)
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        adaptive_height: True
        font_style: 'Display'
        role: 'large'

    MDBoxLayout:
        id: dash_btns
        adaptive_size: True
        md_bg_color: 0, 0, 0, 1
        opacity: 0.6
        pos_hint: {'center_x': 0.5, 'center_y': 0.1}
        radius: [dp(16), ]

        # Setup ------------------------------------------------
        MDButton:
            style: 'text'
            on_press: 
                app.root.transition = FadeTransition(duration=0.2)

            theme_bg_color: 'Custom'
            md_bg_color: 0, 0, 0, 0

            on_release:
                app.root.current = 'setup'
                app.root.transition = SlideTransition(duration=0.25)
                Window.borderless=1

            MDButtonIcon:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                icon: 'image-area'

        # Pomodoro ------------------------------------------------
        MDButton:
            style: 'text'
            theme_bg_color: 'Custom'
            md_bg_color: 0, 0, 0, 0

            on_release:

                # ----------------i.e., start timer if no timer event, else stop----------------
                app.timer.start_timer() if app.timer.tick_event is None else app.timer.stop_timer()


            MDButtonIcon:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                icon: 'play-pause'

        # Statistics ------------------------------------------------
        MDButton:
            style: 'text'
            theme_bg_color: 'Custom'
            md_bg_color: 0, 0, 0, 0

            on_press:
                app.root.current = 'statistics'
                app.root.transition = FadeTransition(duration=0.1)

            MDButtonIcon:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                icon: 'chart-box'



<Profile@RelativeLayout>:
    size_hint: None, None
    size: 50, 50
    radius: self.width / 2
    pos_hint: {'center_x': 0.05, 'center_y': 0.925}

    MDButton:
        style: 'outlined'
        size: 50, 50
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        radius: self.width / 2
        on_release: app.open_profile_menu()